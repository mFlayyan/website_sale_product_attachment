<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>

        <template id="assets_website_extrasearch_frontend" 
            inherit_id="website.layout" name="extrasearch">
            <xpath expr="." position="inside">
                <link rel="stylesheet"
                    href="/website_product_filter/static/src/css/webshop_product_filter.css"
                    />
            </xpath>
        </template>

        <template id="extra_filters" inherit_id="website.website_search_box">
            <xpath
                expr="//div[@class='input-group']" position ="after">
                <t t-if="category and filter">
                    <div>
                        <em>
                            <t t-esc="extra_domain_subtitle"/>
                        </em>
                    </div>
                </t>
            </xpath>
            <xpath
                expr="//div[@class='input-group']/div[@class='oe_search']/input[@name='search']" 
                position ="attributes">
                <attribute name="placeholder">Search in name...</attribute>
            </xpath>
            <xpath
                expr="//div[@class='input-group']"
                position="before">
                <t t-if="filters">
                    <!--overwrite the normal height of form-control class -->
                    <t t-foreach="filters.keys()" t-as="f">
                        <div class="form-control"
                            style="height:100%;">
                            <label
                                t-attf-for="#{filter_prefix}#{f.name}">
                                <t t-esc="f.field_description"/>
                            </label>
                            <input
                                t-if="f.ttype in ['char', 'text']"
                                t-attf-id="#{filter_prefix}#{f.name}"
                                class=" search-query oe_search_box form-control"
                                type="text"
                                t-attf-name="#{filter_prefix}#{f.name}"
                                t-attf-placeholder="contains ..."
                                />
                            <div 
                                t-if="f.ttype in ['integer','float']"
                                >
                                <select
                                    t-attf-id="#{policy_prefix}#{f.name}"
                                    t-attf-name="#{policy_prefix}#{f.name}"
                                    >
                                    <option value="disable" selected="selected">Disable option</option>
                                    <option value="exact">Exact value</option>
                                    <option value="more">More than</option>
                                    <option value="less"> Less than</option>
                                </select>
                                <span t-esc="filters[f][0]"/>
                                <input 
                                    class="form-control"
                                    t-attf-id="#{filter_prefix}#{f.name}"
                                    type="range"
                                    t-attf-min="filters[f][0]"
                                    t-attf-max="filters[f][1]"
                                    t-attf-name="#{filter_prefix}#{f.name}"
                                    t-attf-value="filters[f][0]"
                                    />
                                <span t-esc="filters[f][1]"/>
                            </div>
                            <input
                                t-if="f.ttype in ['date', 'datetime']"
                                t-attf-id="#{filter_prefix}#{f.name}"
                                class="search-query oe_search_box form-control"
                                type="date"
                                t-attf-name="#{filter_prefix}#{f.name}"
                                placeholder="dd-mm-yyy  (after this date)"
                                />
                            <input
                                t-if="f.ttype == 'boolean'"
                                t-attf-id="#{filter_prefix}#{f.name}"
                                type="checkbox"
                                t-attf-name="#{filter_prefix}#{f.name}"
                                />
                            <select
                                t-if="f.ttype == 'selection'"
                                t-attf-name="#{filter_prefix}#{f.name}"
                                >
                                <option>
                                </option>
                                <t t-foreach="filters[f]" t-as="opt">
                                    <option t-att-value="opt[0]">
                                        <t t-esc="opt[1]"/>
                                    </option>
                                </t>
                            </select>
                            <select
                                t-if="f.ttype == 'many2one'"
                                t-attf-name="#{filter_prefix}#{f.name}"
                                >
                                <option value=""></option>
                                <t t-foreach="filters[f]" t-as="opt">
                                    <option t-att-value="opt['id']">
                                        <t t-esc="opt['name']"/>
                                    </option>
                                </t>
                            </select>
                            <!-- maybe future one2many support
                                <select
                                    t-if="f.ttype == 'one2many'"
                                    t-attf-name="#{filter_prefix}#{f.name}"
                                    >
                                    <t t-foreach="filters[f][2]" t-as="opt">
                                        <option t-att-value="opt[filters[f][1]]">
                                            <t t-esc="opt['display_name'] or opt['name']"/>
                                        </option>
                                    </t>
                                </select>
                                -->
                            </div>
                        </t>
                    </t>

                </xpath>

            </template>

            <!-- for search, you had just copy and pasted the searchbox template
         you must simply add all your filter values to the search key and
         overwrite the product display controller to interpret the new values before returning the product list.
           -->


    </data>
</openerp>
